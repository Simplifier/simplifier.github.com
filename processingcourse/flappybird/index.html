<html>
  <head>
    <meta charset="UTF-8">
    <title>Flappy Bird</title>
    <script src="../processing.min.js"  type="text/javascript"></script> 
    <script type="text/javascript">
      // this code was autogenerated from PJS
var myTest =  (function($p) {

    var gamestate = 1;

    var score = 0;
    var highScore = 0;

    var y = 0;
    var speedY = 0;

    var wallX = 0;
    var gapWallY = 0;

    function setup() {
        $p.size(360, 700);
        $p.fill(0);
        $p.textSize(40);
    }
    $p.setup = setup;
    setup = setup.bind($p);

    function draw() {
        $p.background(255);
        if (gamestate == 0) {
            speedY = speedY + 1;
            y = y + speedY;

            $p.rectMode($p.CENTER);
            $p.rect(wallX, gapWallY - 500, 45, 800);
            $p.rect(wallX, gapWallY + 500, 45, 800);

            if (wallX < 0) {
                wallX = $p.width;
                gapWallY = $p.__int_cast($p.random(200, $p.height - 200));
            }

            if (wallX == $p.width / 2) {
                score = score + 1;
                highScore = $p.max(score, highScore);
            }

            if (y > $p.height || y < 0 || ($p.abs($p.width / 2 - wallX) < 25 && $p.abs(y - gapWallY) > 100)) {
                gamestate = 1;
            }

            wallX = wallX - 6;

            $p.ellipse($p.width / 2, y, 30, 30);
            $p.text($p.str(score), $p.width / 2 - 15, 550);
        } else {
            $p.rectMode($p.CENTER);
            $p.rect($p.width / 2, $p.height / 2, 100, 100);
            $p.text("High Score: " + highScore, 50, 450);
        }
    }
    $p.draw = draw;
    draw = draw.bind($p);

    function mousePressed() {
        speedY = -17;

        if (gamestate == 1) {
            wallX = 600;
            gapWallY = y = $p.height / 2;

            gamestate = score = 0;
        }
    }
    $p.mousePressed = mousePressed;
    mousePressed = mousePressed.bind($p);
})
    </script>
  </head>

  <body>
      <canvas id="mytwolines"></canvas>
  <script type="text/javascript">
    var myCanvas = document.getElementById('mytwolines');
     new Processing(myCanvas, myTest);
  </script>

</html>